<div class="container">

  <mat-card *ngIf="(tableau.format === 'simple' && poules && !poules.length) || (tableau.format === 'double' && poules && subscribedUnassignedPlayers && !poules.length && !subscribedUnassignedPlayers.length)">
    <h2 class="center lobster">Il n'y a pas de joueurs inscrits ... pour le moment ;)</h2>
  </mat-card>

  <div *ngIf="tableau.format === 'simple'" fxLayout="row wrap">
    <div fxFlex="33%" *ngFor="let poule of poules; let indexList = index">
      <mat-card [class]="'mat-elevation-z8 ' + (poule.locked ? 'locked' : '')">
        <h2 class="lobster center">Poule n°{{indexList+1}}</h2>

        <div
          cdkDropList
          [cdkDropListData]="poules[indexList].joueurs"
          class="list"
          (cdkDropListDropped)="editPoule($event, poule._id)">
          <div [cdkDragData]="[poule._id, joueur._id]" [cdkDragDisabled]="poule.locked" class="box  center" *ngFor="let joueur of poules[indexList].joueurs" cdkDrag>{{joueur.nom}} - {{joueur.classement}} points</div>
        </div>
        <button (click)="setStatus(poule)" mat-raised-button class="center btnSetLockedPoule" [color]="(poule.locked ? 'locked' : 'unlocked')">{{(poule.locked ? 'Modifier' : 'Valider')}}</button>

      </mat-card>
    </div>
  </div>

  <div *ngIf="tableau.format === 'double'" fxLayout="column" cdkDropListGroup>
      <div fxLayout="row nowrap" fxFlexFill fxLayoutAlign="space-between stretch">

      <div fxFlex="30%" fxLayoutAlign="center stretch">
        <div style="width: 100%;">
          <mat-card>
            <h2 class="lobster center">Joueurs inscrits</h2>

            <div cdkDropList cdkDropListSortingDisabled [cdkDropListData]="subscribedUnassignedPlayers" class="list" (cdkDropListDropped)="editBinome($event, null)">
              <div class="box center" [cdkDragData]="[joueur._id, null]" *ngFor="let joueur of subscribedUnassignedPlayers" cdkDrag>
                <div class="custom-placeholder" *cdkDragPlaceholder></div>
                {{joueur.nom}} - {{joueur.classement}} points
              </div>
            </div>
          </mat-card>
        </div>
      </div>

      <div fxFlex="70%" fxLayoutAlign="center stretch">
        <div style="width: 100%;">
          <div fxLayout="row wrap">
            <div fxFlex="50%" *ngFor="let poule of poules; let indexList = index">
              <mat-card [class]="'mat-elevation-z8 ' + (poule.locked ? 'locked' : '')">
                <h2 class="lobster center">Binôme n°{{indexList+1}}</h2>

                <div cdkDropList [cdkDropListData]="poules[indexList].joueurs" cdkDropListSortingDisabled class="list" (cdkDropListDropped)="editBinome($event, poule._id)">
                  <div [cdkDragData]="[joueur._id, poule._id]" [cdkDragDisabled]="poule.locked" class="box center" *ngFor="let joueur of poules[indexList].joueurs" cdkDrag (dblclick)="unsubscribeDblClick(poule._id, joueur._id)">
                    <div class="custom-placeholder" *cdkDragPlaceholder></div>
                    {{joueur.nom}}
                  </div>
                </div>
              </mat-card>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<div class="container">

  <button (click)="generatePoulesBinomes()" mat-raised-button class="center btnGenerateBracket" color="primary">Générer les poules</button>

    <div *ngIf="tableau && tableau.format === 'simple'" fxLayout="row wrap">
      <div fxFlex="33%" *ngFor="let poule of poules; let indexList = index">
        <mat-card [class]="'mat-elevation-z8 ' + (poule.locked ? 'locked' : '')">
          <h2 class="lobster center">Poule n°{{indexList+1}}</h2>

          <div
            cdkDropList
            [cdkDropListData]="poules[indexList].joueurs"
            class="list"
            (cdkDropListDropped)="editPoule($event, poule._id)">
            <div [cdkDragData]="[poule._id, joueur._id]" [cdkDragDisabled]="poule.locked" class="box" *ngFor="let joueur of poules[indexList].joueurs" cdkDrag>{{joueur.nom}} - {{joueur.classement}} points</div>
          </div>
          <button (click)="setStatus(poule)" mat-raised-button class="center btnSetLockedPoule" [color]="(poule.locked ? 'locked' : 'unlocked')">{{(poule.locked ? 'Modifier' : 'Valider')}}</button>

        </mat-card>
      </div>
    </div>

    <div *ngIf="tableau && tableau.format === 'double'" fxLayout="row wrap" cdkDropListGroup>
      <div fxFlex="33%" *ngFor="let poule of poules; let indexList = index">
        <mat-card [class]="'mat-elevation-z8 ' + (poule.locked ? 'locked' : '')">
          <h2 class="lobster center">Binôme n°{{indexList+1}}</h2>

            <div
              cdkDropList
              [cdkDropListData]="poules[indexList].joueurs"
              class="list"
              (cdkDropListDropped)="editBinome($event, poule._id)">
              <div [cdkDragData]="[poule._id, joueur._id]" [cdkDragDisabled]="poule.locked" class="box" *ngFor="let joueur of poules[indexList].joueurs" cdkDrag>{{joueur.nom}} - {{joueur.classement}} points</div>
            </div>
        </mat-card>
      </div>
    </div>
</div>
